{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SchoolHub - Particle Text Morph</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- AOS Animation CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/home.css' %}" />
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" />
</head>
<body>
  <!-- Navigation Bar with Dark Mode Toggle -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNavbar" data-aos="fade-down">
    <div class="container">
      <a class="navbar-brand" href="#">SchoolHub</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav me-3">
          <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About Us</a></li>
          <li class="nav-item"><a class="nav-link" href="#statistics">Statistics</a></li>
          <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
          <li class="nav-item"><a class="nav-link" href="#events">Events</a></li>
          <li class="nav-item"><a class="nav-link" href="#advices">Advices</a></li>
          <li class="nav-item"><a class="nav-link" href="#testimonials">Testimonials</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/">Login</a></li>
        </ul>
        <button id="darkModeToggle" class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-moon"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Optional Debug Output -->
  <!-- <p>Student Count: {{ student_count }}</p>
  <p>Teacher Count: {{ teacher_count }}</p>
  <p>Course Count: {{ course_count }}</p> -->

  <!-- Hero Section with Particle Text Morph Background -->
  <header id="hero-section" class="hero-section">
    <!-- Canvas for particle text effect -->
    <canvas id="heroCanvas" class="hero-canvas"></canvas>
    <!-- Overlay content -->
    <div class="hero-overlay text-center" data-aos="zoom-in">
      <h1 class="display-4">Welcome to SchoolHub</h1>
      <p class="lead">Empowering schools with knowledge and innovation.</p>
      <a href="/admin/" class="btn btn-lg btn-accent">Login</a>
    </div>
  </header>

  <!-- About Us Section with Books Image -->
  <section id="about" class="about-section py-5" data-aos="fade-right">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6" data-aos="fade-right">
          <img src="{% static 'assets/images/books.png' %}" alt="Books" class="img-fluid about-img rounded" />
        </div>
        <div class="col-md-6" data-aos="fade-left">
          <h2>About SchoolHub</h2>
          <p>
            SchoolHub is a comprehensive school management system that empowers educational institutions with innovative tools for managing students, teachers, and academic performance. We are dedicated to unlocking potential through knowledge.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Statistics Section with Chart.js -->
  <section id="statistics" class="statistics py-5" data-aos="fade-up">
    <div class="container">
      <h2 class="text-center mb-4">Our Statistics</h2>
      <div class="chart-container">
        <canvas id="statsChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Features Section with Glassmorphism Cards -->
  <section id="features" class="features py-5" data-aos="fade-up">
    <div class="container">
      <h2 class="text-center mb-4">Our Features</h2>
      <div class="row g-4 text-center">
        <div class="col-md-3" data-aos="flip-left">
          <div class="card h-100 card-3d">
            <div class="card-body">
              <i class="bi bi-people-fill feature-icon"></i>
              <h5 class="card-title mt-3">Student Management</h5>
              <p class="card-text">Seamlessly manage student data, attendance, and performance.</p>
            </div>
          </div>
        </div>
        <div class="col-md-3" data-aos="flip-left" data-aos-delay="100">
          <div class="card h-100 card-3d">
            <div class="card-body">
              <i class="bi bi-mortarboard-fill feature-icon"></i>
              <h5 class="card-title mt-3">Teacher Management</h5>
              <p class="card-text">Organize teacher profiles and facilitate effective communication.</p>
            </div>
          </div>
        </div>
        <div class="col-md-3" data-aos="flip-left" data-aos-delay="200">
          <div class="card h-100 card-3d">
            <div class="card-body">
              <i class="bi bi-bar-chart-line-fill feature-icon"></i>
              <h5 class="card-title mt-3">Performance Reports</h5>
              <p class="card-text">Generate detailed reports to monitor academic progress.</p>
            </div>
          </div>
        </div>
        <div class="col-md-3" data-aos="flip-left" data-aos-delay="300">
          <div class="card h-100 card-3d">
            <div class="card-body">
              <i class="bi bi-lightbulb-fill feature-icon"></i>
              <h5 class="card-title mt-3">Advices & Guidance</h5>
              <p class="card-text">Receive expert advice, study tips, and career guidance.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Events Section with Enhanced Hover Effects -->
  <section id="events" class="events py-5" data-aos="fade-up">
    <div class="container">
      <h2 class="text-center mb-4">Featured Events</h2>
      <div class="row g-4">
        <div class="col-md-4" data-aos="zoom-in">
          <div class="card h-100 event-card">
            <div class="card-body">
              <h5 class="card-title">Annual Science Fair</h5>
              <p class="card-text">Experience innovative experiments and interactive exhibits.</p>
              <a href="#" class="btn btn-accent btn-sm">Learn More</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="zoom-in" data-aos-delay="100">
          <div class="card h-100 event-card">
            <div class="card-body">
              <h5 class="card-title">Sports Day</h5>
              <p class="card-text">Cheer on our teams during an action-packed day of sports.</p>
              <a href="#" class="btn btn-accent btn-sm">Learn More</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="zoom-in" data-aos-delay="200">
          <div class="card h-100 event-card">
            <div class="card-body">
              <h5 class="card-title">Art Exhibition</h5>
              <p class="card-text">Discover creative masterpieces by our talented students.</p>
              <a href="#" class="btn btn-accent btn-sm">Learn More</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Advices Section -->
  <section id="advices" class="advices py-5" data-aos="fade-up">
    <div class="container">
      <h2 class="text-center mb-4">Advices</h2>
      <div class="row g-4">
        <div class="col-md-4" data-aos="fade-up">
          <div class="card h-100 advice-card">
            <div class="card-body">
              <h5 class="card-title">Study Smart</h5>
              <p class="card-text">
                Organize your study sessions with effective time management and active learning techniques.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
          <div class="card h-100 advice-card">
            <div class="card-body">
              <h5 class="card-title">Stay Organized</h5>
              <p class="card-text">
                Keep a clean workspace and use digital tools to track your assignments and deadlines.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
          <div class="card h-100 advice-card">
            <div class="card-body">
              <h5 class="card-title">Health & Wellbeing</h5>
              <p class="card-text">
                Balance your academic workload with regular exercise, proper nutrition, and sufficient rest.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section with Carousel -->
  <section id="testimonials" class="testimonials py-5" data-aos="fade-up">
    <div class="container">
      <h2 class="text-center mb-4">Testimonials</h2>
      <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="7000">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <blockquote class="blockquote text-center">
              <p class="mb-4">"SchoolHub has transformed our school management system. Highly efficient and user-friendly!"</p>
              <footer class="blockquote-footer">John Doe, Principal</footer>
            </blockquote>
          </div>
          <div class="carousel-item">
            <blockquote class="blockquote text-center">
              <p class="mb-4">"The performance reports provide invaluable insights into our students' achievements."</p>
              <footer class="blockquote-footer">Jane Smith, Teacher</footer>
            </blockquote>
          </div>
          <div class="carousel-item">
            <blockquote class="blockquote text-center">
              <p class="mb-4">"Modern design and innovative features make SchoolHub a top choice."</p>
              <footer class="blockquote-footer">Alex Johnson, Administrator</footer>
            </blockquote>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Call-to-Action Section -->
  <section class="cta-section py-5" data-aos="fade-up">
    <div class="container text-center">
      <h2>Join Us Today</h2>
      <p>Experience the power of innovative school management with SchoolHub.</p>
      <a href="/admin/" class="btn btn-lg btn-accent">Login Now</a>
    </div>
  </section>

  <!-- Scroll to Top Button -->
  <button type="button" id="scrollTopBtn" class="btn btn-primary">
    <i class="bi bi-arrow-up"></i>
  </button>

  <!-- Footer Section -->
  <footer class="footer py-3">
    <div class="container text-center">
      <p>&copy; 2025 SchoolHub. All rights reserved.</p>
      <p>Designed for modern school management.</p>
    </div>
  </footer>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- AOS Animation Library JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    // Initialize AOS
    AOS.init({
      duration: 800,
      easing: 'slide',
      once: true
    });
    
    // Scroll to Top functionality
    const scrollTopBtn = document.getElementById("scrollTopBtn");
    window.onscroll = () => {
      scrollTopBtn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "block" : "none";
    };
    scrollTopBtn.addEventListener("click", () => window.scrollTo({top: 0, behavior: 'smooth'}));
    
    // Statistics Chart using Chart.js with dynamic student, teacher, and course counts.
    const studentCount = parseInt('{{ student_count|default:"0" }}', 10);
    const teacherCount = parseInt('{{ teacher_count|default:"0" }}', 10);
    const courseCount = parseInt('{{ course_count|default:"0" }}', 10);
    
    const ctxChart = document.getElementById('statsChart').getContext('2d');
    new Chart(ctxChart, {
      type: 'bar',
      data: {
        labels: ['Students', 'Teachers', 'Courses'],
        datasets: [{
          label: 'Numbers',
          data: [studentCount, teacherCount, courseCount],
          backgroundColor: [
            'rgba(0, 59, 102, 0.8)',
            'rgba(0, 89, 150, 0.8)',
            'rgba(0, 59, 102, 0.8)'
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
    
    // Dark Mode Toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const icon = darkModeToggle.querySelector('i');
      icon.classList.toggle('bi-moon');
      icon.classList.toggle('bi-sun');
    });
    
    // ===================================================
    // CUSTOM ADVANCED PARTICLE TEXT MORPH (NEURAL NETWORK)
    // ===================================================
    const canvas = document.getElementById('heroCanvas');
    const ctxNeural = canvas.getContext('2d');
    let canvasWidth = 0, canvasHeight = 0;
    let mouse = { x: 0, y: 0 };
    
    function resizeCanvas() {
      const heroSection = document.getElementById('hero-section');
      canvasWidth = canvas.width = heroSection.offsetWidth;
      canvasHeight = canvas.height = heroSection.offsetHeight;
      mouse.x = canvasWidth / 2;
      mouse.y = canvasHeight / 2;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    
    canvas.addEventListener('mousemove', (e) => {
      const rect = canvas.getBoundingClientRect();
      mouse.x = e.clientX - rect.left;
      mouse.y = e.clientY - rect.top;
    });
    
    // Neural Node Class with interactive flash effect
    class NeuralNode {
      constructor() {
        this.x = Math.random() * canvasWidth;
        this.y = Math.random() * canvasHeight;
        this.vx = (Math.random() - 0.5) * 1.2;
        this.vy = (Math.random() - 0.5) * 1.2;
        this.baseRadius = 3 + Math.random() * 3;
        this.radius = this.baseRadius;
        this.hue = Math.random() * 360;
        this.flash = 0;
      }
      update() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0 || this.x > canvasWidth) this.vx *= -1;
        if (this.y < 0 || this.y > canvasHeight) this.vy *= -1;
        
        let dx = this.x - mouse.x;
        let dy = this.y - mouse.y;
        let distance = Math.sqrt(dx * dx + dy * dy);
        if (distance < 80) {
          this.flash = 1;
          let angle = Math.atan2(dy, dx);
          this.vx += Math.cos(angle) * 0.05;
          this.vy += Math.sin(angle) * 0.05;
        } else {
          this.flash = Math.max(this.flash - 0.02, 0);
        }
        this.radius = this.baseRadius + this.flash * 5;
      }
      draw() {
        ctxNeural.beginPath();
        ctxNeural.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        let brightness = 60 + this.flash * 40;
        ctxNeural.fillStyle = `hsl(${this.hue}, 80%, ${brightness}%)`;
        ctxNeural.shadowColor = `hsl(${this.hue}, 80%, ${brightness}%)`;
        ctxNeural.shadowBlur = 10;
        ctxNeural.fill();
      }
    }
    
    const nodes = [];
    const NODE_COUNT = 120;
    for (let i = 0; i < NODE_COUNT; i++) {
      nodes.push(new NeuralNode());
    }
    
    function drawConnections() {
      for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
          const dx = nodes[i].x - nodes[j].x;
          const dy = nodes[i].y - nodes[j].y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          if (distance < 100) {
            ctxNeural.strokeStyle = `rgba(255, 255, 255, ${1 - distance / 100})`;
            ctxNeural.lineWidth = 0.5;
            ctxNeural.beginPath();
            ctxNeural.moveTo(nodes[i].x, nodes[i].y);
            ctxNeural.lineTo(nodes[j].x, nodes[j].y);
            ctxNeural.stroke();
          }
        }
      }
    }
    
    function animateNeural() {
      ctxNeural.fillStyle = 'rgba(0, 0, 0, 0.1)';
      ctxNeural.fillRect(0, 0, canvasWidth, canvasHeight);
      
      nodes.forEach(node => {
        node.update();
        node.draw();
      });
      drawConnections();
      requestAnimationFrame(animateNeural);
    }
    animateNeural();
  </script>
</body>
</html>
